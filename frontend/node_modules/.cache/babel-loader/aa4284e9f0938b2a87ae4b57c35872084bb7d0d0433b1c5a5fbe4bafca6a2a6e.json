{"ast":null,"code":"var _jsxFileName = \"Z:\\\\Documents\\\\IBA\\\\webdev\\\\leadership-training-app\\\\frontend\\\\src\\\\pages\\\\participant\\\\TaskSolve.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate, Link } from 'react-router-dom';\nimport { api } from '../../utils/api';\nimport { toast } from 'react-toastify';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst TaskSolve = () => {\n  _s();\n  const {\n    taskId\n  } = useParams();\n  const navigate = useNavigate();\n  const {\n    user\n  } = useAuth();\n  const [task, setTask] = useState(null);\n  const [team, setTeam] = useState(null);\n  const [answer, setAnswer] = useState('');\n  const [selectedOption, setSelectedOption] = useState('');\n  const [videoFile, setVideoFile] = useState(null);\n  const [videoPreview, setVideoPreview] = useState('');\n  const [timeLeft, setTimeLeft] = useState(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [isLoading, setIsLoading] = useState(true);\n  const timerRef = useRef(null);\n  const videoRef = useRef(null);\n\n  // Fetch task data and user's team\n  useEffect(() => {\n    const fetchTaskData = async () => {\n      try {\n        setIsLoading(true);\n        console.log('Fetching task with ID:', taskId);\n\n        // Get task details\n        const taskResponse = await api.get(`/api/tasks/${taskId}`);\n        console.log('Task data:', taskResponse.data);\n        const taskData = taskResponse.data;\n        setTask(taskData);\n\n        // Find user's team for this game\n        const teamsResponse = await api.get('/api/teams/user');\n        console.log('User teams:', teamsResponse.data);\n        const userTeamForGame = teamsResponse.data.find(team => team.game && (\n        // Handle both populated and non-populated game references\n        team.game._id === taskData.game._id || team.game === taskData.game._id));\n        if (userTeamForGame) {\n          console.log('User team for this game:', userTeamForGame);\n          setTeam(userTeamForGame);\n\n          // Check if task is already submitted\n          const submissionsResponse = await api.get(`/api/teams/${userTeamForGame._id}/submissions`);\n          console.log('Team submissions:', submissionsResponse.data);\n          const alreadySubmitted = submissionsResponse.data.some(submission => submission.task._id === taskId || submission.task === taskId);\n          if (alreadySubmitted) {\n            toast.info('Denne opgave er allerede løst');\n            navigate(`/tasks/${taskData.game._id}`);\n            return;\n          }\n\n          // Initialize timer\n          const timeLimit = taskData.timeLimit || 15; // Default to 15 minutes if not specified\n          setTimeLeft(timeLimit * 60); // Convert to seconds\n        } else {\n          console.log('User does not have a team for this game');\n          toast.error('Du skal først være medlem af et hold i dette spil');\n          navigate(`/tasks/${taskData.game._id}`);\n        }\n      } catch (error) {\n        console.error('Error fetching task data:', error);\n        toast.error('Der opstod en fejl ved hentning af opgaven');\n        navigate('/join-game');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchTaskData();\n\n    // Cleanup timer on unmount\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [taskId, navigate]);\n\n  // Start timer after loading\n  useEffect(() => {\n    if (!isLoading && timeLeft !== null) {\n      timerRef.current = setInterval(() => {\n        setTimeLeft(prevTime => {\n          if (prevTime <= 1) {\n            clearInterval(timerRef.current);\n            toast.error('Tiden er udløbet!');\n            navigate(`/tasks/${task.game._id}`);\n            return 0;\n          }\n          return prevTime - 1;\n        });\n      }, 1000);\n    }\n    return () => {\n      if (timerRef.current) {\n        clearInterval(timerRef.current);\n      }\n    };\n  }, [isLoading, task, navigate, timeLeft]);\n\n  // Handle file selection for video tasks\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Check file type\n    if (!file.type.includes('video/')) {\n      toast.error('Vælg venligst en videofil');\n      return;\n    }\n\n    // Check file size (max 100MB)\n    if (file.size > 100 * 1024 * 1024) {\n      toast.error('Filen er for stor. Maksimal størrelse er 100 MB');\n      return;\n    }\n    setVideoFile(file);\n\n    // Create preview URL\n    const previewUrl = URL.createObjectURL(file);\n    setVideoPreview(previewUrl);\n  };\n\n  // Handle form submission\n  const handleSubmit = async e => {\n    e.preventDefault();\n\n    // Clear timer\n    clearInterval(timerRef.current);\n    if (!team) {\n      toast.error('Du skal være medlem af et hold for at indsende svar');\n      return;\n    }\n    if (task.type === 'multiple_choice' && !selectedOption) {\n      toast.error('Vælg venligst et svar');\n      return;\n    }\n    if (task.type === 'text' && !answer.trim()) {\n      toast.error('Indtast venligst et svar');\n      return;\n    }\n    if (task.type === 'video' && !videoFile) {\n      toast.error('Upload venligst en video');\n      return;\n    }\n    try {\n      setIsSubmitting(true);\n      let submissionData;\n      let response;\n\n      // Submit based on task type\n      if (task.type === 'multiple_choice') {\n        submissionData = {\n          task: taskId,\n          team: team._id,\n          answer: selectedOption\n        };\n        response = await api.post('/api/submissions', submissionData);\n      } else if (task.type === 'text') {\n        submissionData = {\n          task: taskId,\n          team: team._id,\n          answer: answer\n        };\n        response = await api.post('/api/submissions', submissionData);\n      } else if (task.type === 'video') {\n        // For video submissions, use FormData\n        const formData = new FormData();\n        formData.append('task', taskId);\n        formData.append('team', team._id);\n        formData.append('file', videoFile);\n        response = await api.post('/api/submissions', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n      }\n      console.log('Submission response:', response.data);\n\n      // Show success message\n      toast.success('Svar indsendt!');\n\n      // Navigate back to task list\n      navigate(`/tasks/${task.game._id}`);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error('Error submitting answer:', error);\n\n      // Restart timer\n      setTimeLeft(prevTime => {\n        timerRef.current = setInterval(() => {\n          setTimeLeft(time => {\n            if (time <= 1) {\n              clearInterval(timerRef.current);\n              toast.error('Tiden er udløbet!');\n              navigate(`/tasks/${task.game._id}`);\n              return 0;\n            }\n            return time - 1;\n          });\n        }, 1000);\n        return prevTime;\n      });\n      if ((_error$response = error.response) !== null && _error$response !== void 0 && (_error$response$data = _error$response.data) !== null && _error$response$data !== void 0 && _error$response$data.message) {\n        toast.error(error.response.data.message);\n      } else {\n        toast.error('Der opstod en fejl ved indsendelse af svar');\n      }\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  // Format time display\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-center items-center h-64\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this);\n  }\n  if (!task) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-12 max-w-md mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"h-16 w-16 text-red-500 mx-auto mb-4\",\n        fill: \"none\",\n        viewBox: \"0 0 24 24\",\n        stroke: \"currentColor\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          strokeWidth: \"2\",\n          d: \"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold text-red-600 mb-4\",\n        children: \"Opgave ikke fundet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-600 mb-6\",\n        children: \"Den valgte opgave findes ikke eller du har ikke adgang til den.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/join-game\",\n        className: \"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200\",\n        children: \"Tilbage til Find spil\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-md overflow-hidden mb-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col md:flex-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"p-6 md:p-8 flex-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-2xl font-bold text-gray-900 mb-2\",\n            children: task.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-600 mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"inline-block bg-gray-100 text-gray-800 text-sm rounded px-2 py-1 mr-2\",\n              children: task.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm\",\n              children: task.type === 'multiple_choice' ? 'Multiple choice opgave' : task.type === 'text' ? 'Tekstopgave' : 'Videoopgave'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-gray-700 prose\",\n            children: task.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gradient-to-br from-blue-600 to-blue-800 text-white p-6 md:p-8 flex flex-row md:flex-col items-center justify-center md:w-56\",\n          children: [timeLeft !== null && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-sm uppercase tracking-wide opacity-80 mr-4 md:mr-0 md:mb-2\",\n              children: \"Tid tilbage\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-3xl font-bold\",\n              children: formatTime(timeLeft)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between text-sm\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"opacity-80\",\n                children: \"Risiko:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [task.riskPoints, \" point\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between text-sm mt-1\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"opacity-80\",\n                children: \"Bel\\xF8nning:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 306,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [task.rewardPoints, \" point\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 307,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl shadow-md overflow-hidden\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-6 md:p-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-xl font-semibold text-gray-800 mb-6\",\n          children: \"Dit svar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [task.type === 'multiple_choice' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4 mb-6\",\n            children: task.options.map((option, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                id: `option-${index}`,\n                name: \"option\",\n                value: option,\n                checked: selectedOption === option,\n                onChange: () => setSelectedOption(option),\n                className: \"hidden peer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: `option-${index}`,\n                className: \"block border rounded-lg p-4 cursor-pointer transition-colors peer-checked:bg-blue-50 peer-checked:border-blue-500 hover:bg-gray-50\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"w-6 h-6 border border-gray-300 rounded-full flex items-center justify-center mr-3 peer-checked:border-blue-500 peer-checked:bg-blue-500\",\n                    children: selectedOption === option && /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"w-3 h-3 bg-white rounded-full\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 341,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 339,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: option\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 338,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 324,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 15\n          }, this), task.type === 'text' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n              value: answer,\n              onChange: e => setAnswer(e.target.value),\n              placeholder: \"Skriv dit svar her...\",\n              className: \"w-full border border-gray-300 rounded-lg p-4 min-h-[200px] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 15\n          }, this), task.type === 'video' && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\",\n              children: !videoPreview ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"mx-auto h-12 w-12 text-gray-400\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: \"2\",\n                    d: \"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 371,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 370,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-2 text-sm text-gray-600\",\n                  children: \"Klik for at v\\xE6lge en videofil eller tr\\xE6k og slip filen her\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"mt-1 text-xs text-gray-500\",\n                  children: \"Max 100 MB\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 376,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"video/*\",\n                  onChange: handleFileChange,\n                  className: \"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 379,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"relative\",\n                children: [/*#__PURE__*/_jsxDEV(\"video\", {\n                  ref: videoRef,\n                  src: videoPreview,\n                  className: \"w-full rounded\",\n                  controls: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => {\n                    setVideoFile(null);\n                    setVideoPreview('');\n                  },\n                  className: \"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors\",\n                  children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                    className: \"h-5 w-5\",\n                    fill: \"none\",\n                    stroke: \"currentColor\",\n                    viewBox: \"0 0 24 24\",\n                    children: /*#__PURE__*/_jsxDEV(\"path\", {\n                      strokeLinecap: \"round\",\n                      strokeLinejoin: \"round\",\n                      strokeWidth: \"2\",\n                      d: \"M6 18L18 6M6 6l12 12\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 403,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 402,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 394,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"mt-2 text-sm text-gray-500\",\n              children: videoFile ? `Valgt fil: ${videoFile.name}` : 'Ingen fil valgt'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col sm:flex-row justify-end pt-4 border-t border-gray-100\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: `/tasks/${task.game._id}`,\n              className: \"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg mb-3 sm:mb-0 sm:mr-3 text-center hover:bg-gray-50 transition-colors\",\n              children: \"Annuller\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: isSubmitting,\n              className: \"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\",\n              children: isSubmitting ? 'Indsender svar...' : 'Indsend svar'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 315,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 274,\n    columnNumber: 5\n  }, this);\n};\n_s(TaskSolve, \"50cYtOayVJCj2A5ZQPseID0Zypk=\", false, function () {\n  return [useParams, useNavigate, useAuth];\n});\n_c = TaskSolve;\nexport default TaskSolve;\nvar _c;\n$RefreshReg$(_c, \"TaskSolve\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","Link","api","toast","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","TaskSolve","_s","taskId","navigate","user","task","setTask","team","setTeam","answer","setAnswer","selectedOption","setSelectedOption","videoFile","setVideoFile","videoPreview","setVideoPreview","timeLeft","setTimeLeft","isSubmitting","setIsSubmitting","isLoading","setIsLoading","timerRef","videoRef","fetchTaskData","console","log","taskResponse","get","data","taskData","teamsResponse","userTeamForGame","find","game","_id","submissionsResponse","alreadySubmitted","some","submission","info","timeLimit","error","current","clearInterval","setInterval","prevTime","handleFileChange","e","file","target","files","type","includes","size","previewUrl","URL","createObjectURL","handleSubmit","preventDefault","trim","submissionData","response","post","formData","FormData","append","headers","success","_error$response","_error$response$data","time","message","formatTime","seconds","mins","Math","floor","secs","toString","padStart","className","children","fileName","_jsxFileName","lineNumber","columnNumber","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","to","title","category","description","riskPoints","rewardPoints","onSubmit","options","map","option","index","id","name","value","checked","onChange","htmlFor","placeholder","accept","ref","src","controls","onClick","disabled","_c","$RefreshReg$"],"sources":["Z:/Documents/IBA/webdev/leadership-training-app/frontend/src/pages/participant/TaskSolve.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport { api } from '../../utils/api';\r\nimport { toast } from 'react-toastify';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\nconst TaskSolve = () => {\r\n  const { taskId } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  \r\n  const [task, setTask] = useState(null);\r\n  const [team, setTeam] = useState(null);\r\n  const [answer, setAnswer] = useState('');\r\n  const [selectedOption, setSelectedOption] = useState('');\r\n  const [videoFile, setVideoFile] = useState(null);\r\n  const [videoPreview, setVideoPreview] = useState('');\r\n  const [timeLeft, setTimeLeft] = useState(null);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  \r\n  const timerRef = useRef(null);\r\n  const videoRef = useRef(null);\r\n  \r\n  // Fetch task data and user's team\r\n  useEffect(() => {\r\n    const fetchTaskData = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        \r\n        console.log('Fetching task with ID:', taskId);\r\n        \r\n        // Get task details\r\n        const taskResponse = await api.get(`/api/tasks/${taskId}`);\r\n        console.log('Task data:', taskResponse.data);\r\n        const taskData = taskResponse.data;\r\n        setTask(taskData);\r\n        \r\n        // Find user's team for this game\r\n        const teamsResponse = await api.get('/api/teams/user');\r\n        console.log('User teams:', teamsResponse.data);\r\n        \r\n        const userTeamForGame = teamsResponse.data.find(team => \r\n          team.game && (\r\n            // Handle both populated and non-populated game references\r\n            team.game._id === taskData.game._id || \r\n            team.game === taskData.game._id\r\n          )\r\n        );\r\n        \r\n        if (userTeamForGame) {\r\n          console.log('User team for this game:', userTeamForGame);\r\n          setTeam(userTeamForGame);\r\n          \r\n          // Check if task is already submitted\r\n          const submissionsResponse = await api.get(`/api/teams/${userTeamForGame._id}/submissions`);\r\n          console.log('Team submissions:', submissionsResponse.data);\r\n          \r\n          const alreadySubmitted = submissionsResponse.data.some(submission => \r\n            submission.task._id === taskId || submission.task === taskId\r\n          );\r\n          \r\n          if (alreadySubmitted) {\r\n            toast.info('Denne opgave er allerede løst');\r\n            navigate(`/tasks/${taskData.game._id}`);\r\n            return;\r\n          }\r\n          \r\n          // Initialize timer\r\n          const timeLimit = taskData.timeLimit || 15; // Default to 15 minutes if not specified\r\n          setTimeLeft(timeLimit * 60); // Convert to seconds\r\n        } else {\r\n          console.log('User does not have a team for this game');\r\n          toast.error('Du skal først være medlem af et hold i dette spil');\r\n          navigate(`/tasks/${taskData.game._id}`);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching task data:', error);\r\n        toast.error('Der opstod en fejl ved hentning af opgaven');\r\n        navigate('/join-game');\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    \r\n    fetchTaskData();\r\n    \r\n    // Cleanup timer on unmount\r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    };\r\n  }, [taskId, navigate]);\r\n  \r\n  // Start timer after loading\r\n  useEffect(() => {\r\n    if (!isLoading && timeLeft !== null) {\r\n      timerRef.current = setInterval(() => {\r\n        setTimeLeft(prevTime => {\r\n          if (prevTime <= 1) {\r\n            clearInterval(timerRef.current);\r\n            toast.error('Tiden er udløbet!');\r\n            navigate(`/tasks/${task.game._id}`);\r\n            return 0;\r\n          }\r\n          return prevTime - 1;\r\n        });\r\n      }, 1000);\r\n    }\r\n    \r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    };\r\n  }, [isLoading, task, navigate, timeLeft]);\r\n  \r\n  // Handle file selection for video tasks\r\n  const handleFileChange = (e) => {\r\n    const file = e.target.files[0];\r\n    if (!file) return;\r\n    \r\n    // Check file type\r\n    if (!file.type.includes('video/')) {\r\n      toast.error('Vælg venligst en videofil');\r\n      return;\r\n    }\r\n    \r\n    // Check file size (max 100MB)\r\n    if (file.size > 100 * 1024 * 1024) {\r\n      toast.error('Filen er for stor. Maksimal størrelse er 100 MB');\r\n      return;\r\n    }\r\n    \r\n    setVideoFile(file);\r\n    \r\n    // Create preview URL\r\n    const previewUrl = URL.createObjectURL(file);\r\n    setVideoPreview(previewUrl);\r\n  };\r\n  \r\n  // Handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    // Clear timer\r\n    clearInterval(timerRef.current);\r\n    \r\n    if (!team) {\r\n      toast.error('Du skal være medlem af et hold for at indsende svar');\r\n      return;\r\n    }\r\n    \r\n    if (task.type === 'multiple_choice' && !selectedOption) {\r\n      toast.error('Vælg venligst et svar');\r\n      return;\r\n    }\r\n    \r\n    if (task.type === 'text' && !answer.trim()) {\r\n      toast.error('Indtast venligst et svar');\r\n      return;\r\n    }\r\n    \r\n    if (task.type === 'video' && !videoFile) {\r\n      toast.error('Upload venligst en video');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setIsSubmitting(true);\r\n      \r\n      let submissionData;\r\n      let response;\r\n      \r\n      // Submit based on task type\r\n      if (task.type === 'multiple_choice') {\r\n        submissionData = {\r\n          task: taskId,\r\n          team: team._id,\r\n          answer: selectedOption\r\n        };\r\n        \r\n        response = await api.post('/api/submissions', submissionData);\r\n      } else if (task.type === 'text') {\r\n        submissionData = {\r\n          task: taskId,\r\n          team: team._id,\r\n          answer: answer\r\n        };\r\n        \r\n        response = await api.post('/api/submissions', submissionData);\r\n      } else if (task.type === 'video') {\r\n        // For video submissions, use FormData\r\n        const formData = new FormData();\r\n        formData.append('task', taskId);\r\n        formData.append('team', team._id);\r\n        formData.append('file', videoFile);\r\n        \r\n        response = await api.post('/api/submissions', formData, {\r\n          headers: {\r\n            'Content-Type': 'multipart/form-data'\r\n          }\r\n        });\r\n      }\r\n      \r\n      console.log('Submission response:', response.data);\r\n      \r\n      // Show success message\r\n      toast.success('Svar indsendt!');\r\n      \r\n      // Navigate back to task list\r\n      navigate(`/tasks/${task.game._id}`);\r\n    } catch (error) {\r\n      console.error('Error submitting answer:', error);\r\n      \r\n      // Restart timer\r\n      setTimeLeft(prevTime => {\r\n        timerRef.current = setInterval(() => {\r\n          setTimeLeft(time => {\r\n            if (time <= 1) {\r\n              clearInterval(timerRef.current);\r\n              toast.error('Tiden er udløbet!');\r\n              navigate(`/tasks/${task.game._id}`);\r\n              return 0;\r\n            }\r\n            return time - 1;\r\n          });\r\n        }, 1000);\r\n        return prevTime;\r\n      });\r\n      \r\n      if (error.response?.data?.message) {\r\n        toast.error(error.response.data.message);\r\n      } else {\r\n        toast.error('Der opstod en fejl ved indsendelse af svar');\r\n      }\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n  \r\n  // Format time display\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n  \r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"flex justify-center items-center h-64\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  if (!task) {\r\n    return (\r\n      <div className=\"text-center py-12 max-w-md mx-auto\">\r\n        <svg className=\"h-16 w-16 text-red-500 mx-auto mb-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\r\n        </svg>\r\n        <h2 className=\"text-2xl font-bold text-red-600 mb-4\">Opgave ikke fundet</h2>\r\n        <p className=\"text-gray-600 mb-6\">Den valgte opgave findes ikke eller du har ikke adgang til den.</p>\r\n        <Link to=\"/join-game\" className=\"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition duration-200\">\r\n          Tilbage til Find spil\r\n        </Link>\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      {/* Task header */}\r\n      <div className=\"bg-white rounded-xl shadow-md overflow-hidden mb-6\">\r\n        <div className=\"flex flex-col md:flex-row\">\r\n          <div className=\"p-6 md:p-8 flex-1\">\r\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">{task.title}</h1>\r\n            <p className=\"text-gray-600 mb-4\">\r\n              <span className=\"inline-block bg-gray-100 text-gray-800 text-sm rounded px-2 py-1 mr-2\">\r\n                {task.category}\r\n              </span>\r\n              <span className=\"text-sm\">\r\n                {task.type === 'multiple_choice' ? 'Multiple choice opgave' : \r\n                 task.type === 'text' ? 'Tekstopgave' : 'Videoopgave'}\r\n              </span>\r\n            </p>\r\n            <div className=\"text-gray-700 prose\">\r\n              {task.description}\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-gradient-to-br from-blue-600 to-blue-800 text-white p-6 md:p-8 flex flex-row md:flex-col items-center justify-center md:w-56\">\r\n            {timeLeft !== null && (\r\n              <>\r\n                <div className=\"text-sm uppercase tracking-wide opacity-80 mr-4 md:mr-0 md:mb-2\">Tid tilbage</div>\r\n                <div className=\"text-3xl font-bold\">{formatTime(timeLeft)}</div>\r\n              </>\r\n            )}\r\n            <div className=\"flex flex-col mt-4\">\r\n              <div className=\"flex items-center justify-between text-sm\">\r\n                <div className=\"opacity-80\">Risiko:</div>\r\n                <div>{task.riskPoints} point</div>\r\n              </div>\r\n              <div className=\"flex items-center justify-between text-sm mt-1\">\r\n                <div className=\"opacity-80\">Belønning:</div>\r\n                <div>{task.rewardPoints} point</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Task answer form */}\r\n      <div className=\"bg-white rounded-xl shadow-md overflow-hidden\">\r\n        <div className=\"p-6 md:p-8\">\r\n          <h2 className=\"text-xl font-semibold text-gray-800 mb-6\">Dit svar</h2>\r\n          \r\n          <form onSubmit={handleSubmit}>\r\n            {/* Multiple choice form */}\r\n            {task.type === 'multiple_choice' && (\r\n              <div className=\"space-y-4 mb-6\">\r\n                {task.options.map((option, index) => (\r\n                  <div key={index} className=\"relative\">\r\n                    <input\r\n                      type=\"radio\"\r\n                      id={`option-${index}`}\r\n                      name=\"option\"\r\n                      value={option}\r\n                      checked={selectedOption === option}\r\n                      onChange={() => setSelectedOption(option)}\r\n                      className=\"hidden peer\"\r\n                    />\r\n                    <label\r\n                      htmlFor={`option-${index}`}\r\n                      className=\"block border rounded-lg p-4 cursor-pointer transition-colors peer-checked:bg-blue-50 peer-checked:border-blue-500 hover:bg-gray-50\"\r\n                    >\r\n                      <div className=\"flex items-center\">\r\n                        <div className=\"w-6 h-6 border border-gray-300 rounded-full flex items-center justify-center mr-3 peer-checked:border-blue-500 peer-checked:bg-blue-500\">\r\n                          {selectedOption === option && (\r\n                            <div className=\"w-3 h-3 bg-white rounded-full\"></div>\r\n                          )}\r\n                        </div>\r\n                        <div className=\"flex-1\">{option}</div>\r\n                      </div>\r\n                    </label>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n            \r\n            {/* Text answer form */}\r\n            {task.type === 'text' && (\r\n              <div className=\"mb-6\">\r\n                <textarea\r\n                  value={answer}\r\n                  onChange={(e) => setAnswer(e.target.value)}\r\n                  placeholder=\"Skriv dit svar her...\"\r\n                  className=\"w-full border border-gray-300 rounded-lg p-4 min-h-[200px] focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                ></textarea>\r\n              </div>\r\n            )}\r\n            \r\n            {/* Video upload form */}\r\n            {task.type === 'video' && (\r\n              <div className=\"mb-6\">\r\n                <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\r\n                  {!videoPreview ? (\r\n                    <>\r\n                      <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"></path>\r\n                      </svg>\r\n                      <p className=\"mt-2 text-sm text-gray-600\">\r\n                        Klik for at vælge en videofil eller træk og slip filen her\r\n                      </p>\r\n                      <p className=\"mt-1 text-xs text-gray-500\">\r\n                        Max 100 MB\r\n                      </p>\r\n                      <input\r\n                        type=\"file\"\r\n                        accept=\"video/*\"\r\n                        onChange={handleFileChange}\r\n                        className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\r\n                      />\r\n                    </>\r\n                  ) : (\r\n                    <div className=\"relative\">\r\n                      <video\r\n                        ref={videoRef}\r\n                        src={videoPreview}\r\n                        className=\"w-full rounded\"\r\n                        controls\r\n                      ></video>\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => {\r\n                          setVideoFile(null);\r\n                          setVideoPreview('');\r\n                        }}\r\n                        className=\"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors\"\r\n                      >\r\n                        <svg className=\"h-5 w-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\r\n                        </svg>\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                \r\n                <p className=\"mt-2 text-sm text-gray-500\">\r\n                  {videoFile ? `Valgt fil: ${videoFile.name}` : 'Ingen fil valgt'}\r\n                </p>\r\n              </div>\r\n            )}\r\n            \r\n            {/* Buttons */}\r\n            <div className=\"flex flex-col sm:flex-row justify-end pt-4 border-t border-gray-100\">\r\n              <Link\r\n                to={`/tasks/${task.game._id}`}\r\n                className=\"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg mb-3 sm:mb-0 sm:mr-3 text-center hover:bg-gray-50 transition-colors\"\r\n              >\r\n                Annuller\r\n              </Link>\r\n              \r\n              <button\r\n                type=\"submit\"\r\n                disabled={isSubmitting}\r\n                className=\"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n              >\r\n                {isSubmitting ? 'Indsender svar...' : 'Indsend svar'}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TaskSolve;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}